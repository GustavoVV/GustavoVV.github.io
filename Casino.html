<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alerta de Ruletas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #alertas {
            color: red;
            font-weight: bold;
            margin-top: 20px;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 20px;
        }
        .ruleta {
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
        }
        .ruleta h3 {
            margin-top: 0;
        }
        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <h1>Ruletas: Alerta de Patrones</h1>
    <p>Introduce los números de cada ruleta a continuación:</p>

    <div class="grid-container">
        <!-- Ruleta 1 -->
        <div id="ruleta1" class="ruleta">
            <h3>Ruleta 1</h3>
            <label for="numeroInput1">Número: </label>
            <input type="number" id="numeroInput1" min="0" max="36">
            <button onclick="agregarNumero(1)">Agregar Número</button>
            <p>Secuencia actual: <span id="numeros1"></span></p>
            <div id="alertas1"></div>
        </div>

        <!-- Ruleta 2 -->
        <div id="ruleta2" class="ruleta">
            <h3>Ruleta 2</h3>
            <label for="numeroInput2">Número: </label>
            <input type="number" id="numeroInput2" min="0" max="36">
            <button onclick="agregarNumero(2)">Agregar Número</button>
            <p>Secuencia actual: <span id="numeros2"></span></p>
            <div id="alertas2"></div>
        </div>

        <!-- Ruleta 3 -->
        <div id="ruleta3" class="ruleta">
            <h3>Ruleta 3</h3>
            <label for="numeroInput3">Número: </label>
            <input type="number" id="numeroInput3" min="0" max="36">
            <button onclick="agregarNumero(3)">Agregar Número</button>
            <p>Secuencia actual: <span id="numeros3"></span></p>
            <div id="alertas3"></div>
        </div>

        <!-- Ruleta 4 -->
        <div id="ruleta4" class="ruleta">
            <h3>Ruleta 4</h3>
            <label for="numeroInput4">Número: </label>
            <input type="number" id="numeroInput4" min="0" max="36">
            <button onclick="agregarNumero(4)">Agregar Número</button>
            <p>Secuencia actual: <span id="numeros4"></span></p>
            <div id="alertas4"></div>
        </div>
    </div>

    <script>
        const ruletas = {
            1: [],
            2: [],
            3: [],
            4: []
        };
        
        const docenas = {
            "1": [1, 12],
            "2": [13, 24],
            "3": [25, 36]
        };

        const columnas = {
            "1": [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34],
            "2": [2, 5, 8, 11, 14, 17, 20, 23, 26, 29, 32, 35],
            "3": [3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36]
        };

        function agregarNumero(ruleta) {
            const numeroInputId = `numeroInput${ruleta}`;
            const numero = parseInt(document.getElementById(numeroInputId).value);
            if (numero >= 0 && numero <= 36) {
                ruletas[ruleta].push(numero);
                document.getElementById(`numeros${ruleta}`).innerText = ruletas[ruleta].join(", ");
                verificarAlertas(ruleta);
            } else {
                alert("Introduce un número válido entre 0 y 36.");
            }
        }

        function verificarAlertas(ruleta) {
            const numeros = ruletas[ruleta];

            // Verificar que se hayan introducido al menos 6 números
            if (numeros.length < 6) {
                return; // No hacer nada si hay menos de 6 números
            }

            const alertas = new Set(); // Usar un conjunto para evitar alertas duplicadas

            if (numeros.length >= 17) {
                verificarDocenas(numeros, alertas);
            }
            if (numeros.length >= 6) {
                verificarColumnas(numeros, alertas);
            }
            if (numeros.length >= 4) {
                verificarSeissenas(numeros, alertas);
            }
            if (numeros.length >= 16) {
                verificarCambio(numeros, alertas);
            }
            if (numeros.length >= 20) {
                verificarFaltaPasa(numeros, alertas);
            }
            if (numeros.length >= 6) {
                verificarNumeros12(numeros, alertas);
            }
            // Nueva verificación para seisena no salida
            verificarSeisenaNoSalida(numeros, alertas);

            // Nuevas alertas basadas en el pseudocódigo
            verificarDocenaNoSalida(numeros, alertas);
            verificarParImparSeguidos(numeros, alertas);
            verificarFaltaPasaSeguidos(numeros, alertas);

            mostrarAlertas(Array.from(alertas), ruleta); // Convertir el conjunto a un array
        }

        function verificarDocenas(numeros, alertas) {
            const ultimos17 = numeros.slice(-17);
            const fueraDeDocenas = ultimos17.every(n => !(n >= 1 && n <= 36));
            if (fueraDeDocenas) {
                alertas.add("17 números sin caer en ninguna de las tres docenas.");
            }
        }

        function verificarColumnas(numeros, alertas) {
            const ultimos6 = numeros.slice(-6);
            for (const col in columnas) {
                if (ultimos6.every(n => columnas[col].includes(n))) {
                    alertas.add(`6 números seguidos en la columna ${col}.`);
                    break;
                }
            }
        }

        function verificarSeissenas(numeros, alertas) {
            const ultimos4 = numeros.slice(-4);
            if (ultimos4.every(n => n >= 13 && n <= 18) || ultimos4.every(n => n >= 19 && n <= 24)) {
                alertas.add("4 números seguidos en una de las seisenas (13-18 o 19-24).");
            }
        }

        function verificarCambio(numeros, alertas) {
            const ultimos16 = numeros.slice(-16);
            let parImparAlternancia = true;
            let rojoNegroAlternancia = true;
            let faltaPasaAlternancia = true;

            for (let i = 0; i < ultimos16.length - 1; i++) {
                const actual = ultimos16[i];
                const siguiente = ultimos16[i + 1];

                // Par o Impar
                if ((actual % 2 === 0) === (siguiente % 2 === 0)) {
                    parImparAlternancia = false;
                }

                // Rojo o Negro (asumiendo que tienes una función o un array que determina el color)
                if (esRojo(actual) === esRojo(siguiente)) {
                    rojoNegroAlternancia = false;
                }

                // Falta (1-18) o Pasa (19-36)
                if (((actual <= 18) === (siguiente <= 18))) {
                    faltaPasaAlternancia = false;
                }
            }

            if (!parImparAlternancia) {
                alertas.add("No ha habido alternancia entre números pares e impares en los últimos 16 números.");
            }
            if (!rojoNegroAlternancia) {
                alertas.add("No ha habido alternancia entre números rojos y negros en los últimos 16 números.");
            }
            if (!faltaPasaAlternancia) {
                alertas.add("No ha habido alternancia entre Falta y Pasa en los últimos 16 números.");
            }
        }

        function esRojo(numero) {
            // Asumiendo que tienes una función que determina si un número es rojo
            const rojos = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36];
            return rojos.includes(numero);
        }

        function verificarFaltaPasa(numeros, alertas) {
            const ultimos20 = numeros.slice(-20);
            const faltas = ultimos20.filter(n => n >= 1 && n <= 18).length;
            const pasas = ultimos20.filter(n => n >= 19 && n <= 36).length;

            if (faltas >= 18 || pasas >= 18) {
                alertas.add("18 veces seguidas o alternas en Falta o Pasa en un total de 20 números.");
            }
        }

        function verificarNumeros12(numeros, alertas) {
            const ultimos6 = numeros.slice(-6);
            if (ultimos6.every(n => (n >= 10 && n <= 19) || (n >= 20 && n <= 29))) {
                alertas.add("6 números seguidos entre 10-19 o 20-29.");
            }
        }

        function verificarSeisenaNoSalida(numeros, alertas) {
            const ultimos6 = numeros.slice(-6);
            const seisena1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const seisena2 = [13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24];
            const seisena3 = [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36];

            const seisena1Ausente = ultimos6.every(n => !seisena1.includes(n));
            const seisena2Ausente = ultimos6.every(n => !seisena2.includes(n));
            const seisena3Ausente = ultimos6.every(n => !seisena3.includes(n));

            if (seisena1Ausente) {
                alertas.add("La primera seisena no ha salido en los últimos 6 números.");
            }
            if (seisena2Ausente) {
                alertas.add("La segunda seisena no ha salido en los últimos 6 números.");
            }
            if (seisena3Ausente) {
                alertas.add("La tercera seisena no ha salido en los últimos 6 números.");
            }
        }

        function verificarDocenaNoSalida(numeros, alertas) {
            // Verificar si alguna docena no ha salido en los últimos 17 números
            const ultimos17 = numeros.slice(-17);
            const docenas = [0, 0, 0]; // Contadores para cada docena
            ultimos17.forEach(num => {
                if (num >= 1 && num <= 12) docenas[0]++;
                else if (num >= 13 && num <= 24) docenas[1]++;
                else if (num >= 25 && num <= 36) docenas[2]++;
            });
            docenas.forEach((count, index) => {
                if (count === 0) alertas.add(`Docena ${index + 1} no ha salido en los últimos 17 números.`);
            });
        }

        function verificarParImparSeguidos(numeros, alertas) {
            // Verificar si un número par o impar ha salido 16 veces seguidas
            const esPar = num => num % 2 === 0;
            let parSeguidos = 0, imparSeguidos = 0;
            numeros.forEach(num => {
                if (esPar(num)) {
                    parSeguidos++;
                    imparSeguidos = 0;
                } else {
                    imparSeguidos++;
                    parSeguidos = 0;
                }
                if (parSeguidos >= 16) alertas.add("16 números pares seguidos.");
                if (imparSeguidos >= 16) alertas.add("16 números impares seguidos.");
            });
        }

        function verificarFaltaPasaSeguidos(numeros, alertas) {
            // Verificar si "Pasa" o "Falta" ha salido 18 veces en un total de 20 números
            const ultimos20 = numeros.slice(-20);
            const falta = ultimos20.filter(n => n >= 1 && n <= 18).length;
            const pasa = ultimos20.filter(n => n >= 19 && n <= 36).length;
            if (falta >= 18) alertas.add("18 veces 'Falta' en los últimos 20 números.");
            if (pasa >= 18) alertas.add("18 veces 'Pasa' en los últimos 20 números.");
        }

        function mostrarAlertas(alertas, ruleta) {
            const alertasDiv = document.getElementById(`alertas${ruleta}`);
            alertasDiv.innerHTML = ""; // Limpiar alertas anteriores
            if (alertas.length > 0) {
                // Crear un elemento HTML para cada alerta y asignarle un estilo
                alertas.forEach(alerta => {
                    const alertaElemento = document.createElement("p");
                    alertaElemento.style.color = "red"; // Establecer el color de la alerta
                    alertaElemento.style.fontWeight = "bold"; // Opcional: Hacer el texto en negrita
                    alertaElemento.textContent = alerta;
                    alertasDiv.appendChild(alertaElemento);
                });
            }
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Asumiendo que las cajas de entrada tienen una clase 'numero-ruleta'
            // y cada botón tiene un id que corresponde con 'btn-' seguido del id de la caja de entrada
            const cajas = document.querySelectorAll('.numero-ruleta');

            cajas.forEach(caja => {
                caja.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        // Obtener el id del botón correspondiente
                        const botonId = 'btn-' + this.id;
                        const boton = document.getElementById(botonId);
                        if (boton) {
                            boton.click(); // Simular clic en el botón
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>