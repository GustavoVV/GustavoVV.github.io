---
import pkg from '../../package.json';
const { title = 'Valia â€” IA aplicada', description = 'Servicios con IA: microâ€‘consultorÃ­a y setups express', canonical = 'https://tudominio.com' } = Astro.props;
const BASE = import.meta.env.BASE_URL || '/';
const currentPath = (Astro.url && Astro.url.pathname) || '/';
const isEn = currentPath.startsWith(BASE + 'en/');
const langHref = isEn ? BASE + 'valia.html' : BASE + 'en/valia.html';
const langLabel = isEn ? 'ES' : 'EN';
const prefix = isEn ? 'en/' : '';
const contactPage = isEn ? 'contact.html' : 'contacto.html';
// One-page toggle between ES and EN single pages
const isValiaEN = currentPath.endsWith('valia-en.html');
const onePageToggleHref = BASE + (isValiaEN ? 'valia.html' : 'valia-en.html');
const onePageToggleLabel = isValiaEN ? 'ES' : 'EN';
// Detect one-page context to decide between anchors vs full pages
const isValiaES = currentPath.endsWith('valia.html') || currentPath === BASE || currentPath.endsWith('/index.html');
const isOnePage = isValiaES || isValiaEN;
const WHATSAPP_NUMBER = '34675933698';
const WA_URL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent('Hola ðŸ‘‹, vengo de la web. Me interesa el plan Micro/Express. Mi objetivo es [ej: ahorrar tiempo en reporting/anuncios]. Â¿Me cuentas cÃ³mo empezar?')}`;
const VERSION = pkg.version || '0.0.0';
---
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonical} />
    <link rel="icon" href="/favicon.ico" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta name="twitter:card" content="summary_large_image" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css" />
    <style>
      /* Fallback inline por si /styles.css no carga (apertura file://) */
      body.bg-soft{background:
        linear-gradient(180deg, #eef2f7 0%, rgba(238,242,247,.85) 35%, #f8fafc 100%),
        radial-gradient(900px 500px at 12% -10%, rgba(201,214,255,.25), transparent 70%),
        radial-gradient(900px 500px at 110% 0%, rgba(180,210,255,.20), transparent 70%),
        #f6f8fb !important}
      @media (prefers-color-scheme: dark){body.bg-soft{background:
        linear-gradient(180deg, rgba(25,32,45,.75) 0%, rgba(15,20,30,.85) 60%, rgba(11,12,16,1) 100%),
        radial-gradient(900px 500px at 15% -10%, rgba(38,70,120,.35), transparent 70%),
        radial-gradient(900px 500px at 110% 0%, rgba(29,78,137,.25), transparent 70%),
        #0B0C10 !important}}
    </style>
  </head>
  <body class="bg-soft">
    <header class="border-bottom bg-body-tertiary sticky-top" style="background:transparent">
      <nav class="navbar navbar-expand-lg container" aria-label="Principal">
        <a class="navbar-brand fw-bold" href={BASE + 'valia.html'}>Valia</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div id="nav" class="collapse navbar-collapse">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item ms-lg-3"><a class="btn btn-success btn-sm" href={WA_URL} target="_blank" rel="noopener">WhatsApp</a></li>
            <li class="nav-item ms-lg-2"><a class="btn btn-outline-primary btn-sm d-flex align-items-center" href={onePageToggleHref}><i class="bi bi-globe me-1"></i> {onePageToggleLabel}</a></li>
          </ul>
        </div>
      </nav>
    </header>
    <main class="container py-4">
      <slot />
    </main>
    <footer class="border-top py-5">
      <div class="container d-flex flex-column flex-lg-row align-items-start align-items-lg-center justify-content-between gap-3">
        <div class="text-muted small">Entregamos setups de IA en &lt;72 h a empresas en EspaÃ±a, LatAm, USA y Commonwealth.</div>
        <ul class="nav small">
          <li class="nav-item"><a class="nav-link px-2" href="/faq.html">FAQ</a></li>
          <li class="nav-item"><a class="nav-link px-2" href="/contacto.html">Contacto</a></li>
          <li class="nav-item"><a class="nav-link px-2" href="/legal/privacidad.html">Privacidad</a></li>
          <li class="nav-item"><a class="nav-link px-2" href="/legal/terminos.html">TÃ©rminos</a></li>
        </ul>
        <div class="d-flex gap-3">
          <a class="text-decoration-none" href="mailto:hola@tudominio.com" aria-label="Email"><i class="bi bi-envelope"></i></a>
          <a class="text-decoration-none" href="https://www.linkedin.com" target="_blank" rel="noopener" aria-label="LinkedIn"><i class="bi bi-linkedin"></i></a>
          <a class="text-decoration-none" href={WA_URL} target="_blank" rel="noopener" aria-label="WhatsApp"><i class="bi bi-whatsapp"></i></a>
        </div>
        <div class="ms-lg-3"><small class="muted">Â© {new Date().getFullYear()} Valia Â· v{VERSION}</small></div>
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>

